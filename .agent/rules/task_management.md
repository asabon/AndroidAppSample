# タスク・Issue管理ルール

## プロジェクトの「唯一の真実（Source of Truth）」
- **docs/progress/task.md** を現在のプロジェクトステータスと常に一致させてください。
- すべてのタスク、未解決の課題、将来の展望はこのファイルに集約されます。

## タスクの追加と開始
1. **タスクの特定**: ユーザーから新しい要望があった場合、まず **docs/progress/task.md** にタスクを追加し、全体像の中での位置付けを明確にしてください。
2. **Issue起票**: 実装を開始する前に、そのタスクに対して GitHub Issue を起票してください（/issue_new ワークフローを推奨）。
3. **作業用ブランチの作成**:
   - gh issue develop [Issue番号] --name [ブランチ名] 等を使用して、GitHub 上で Issue に関連付けられたブランチを作成してください。
   - git fetch origin で作成したブランチをローカルに取り込み、そのブランチにチェックアウトしてください。
   - **ブランチのチェックアウトが完了するまで、実際のコード変更作業は開始しないでください。**

## 作業中の進捗・反映
- 作業が進捗した際（コードの変更、問題の発見、議論による決定事項など）は、関連する GitHub Issue にコメントを残してください（/issue_comment ワークフローを推奨）。
- 適宜 /save ワークフローを実行し、**docs/progress/task.md** の進捗状況やメモを最新に更新してください。

## タスクの完了とプルリクエスト（PR）フロー
タスクが完了し、coding.md に定められた検証をすべてパスした後は、以下のフローを厳守してください。

### 1. 完了報告（Antigravity）
- 	ask.md を更新し、GitHub Issue 内のすべてのチェックボックスがチェックされていることを確認してください。
- チャットでユーザーに作業完了を報告します。

### 2. 内容確認とプッシュ（User）
- ユーザーが実装内容を確認します。
- **修正が必要な場合**: ユーザーの指摘に基づき、Antigravity が修正と検証を繰り返します。
- **問題ない場合**: ユーザーがローカルの変更をコミット・プッシュします。

### 3. プルリクエストの作成（Antigravity）
- ユーザーから「プッシュ完了」の報告を受けたら、Antigravity が gh pr create を実行してプルリクエストを作成します。
- PR のタイトルや説明には、関連する Issue 番号（Closes #XX）を含めてください。

### 4. CI/CD 確認とマージ（User）
- ユーザーが PR に対する CI/CD の結果を確認します。
- **CI/CD が失敗した場合**: ユーザーの報告に基づき、Antigravity が原因を調査・修正します。
- **問題ない場合**: ユーザーが PR を承認・マージします。
  - マージにより、関連付けられた Issue が自動的にクローズされます。
  - 最終的に 	ask.md を「完了」ステータスに更新します。
